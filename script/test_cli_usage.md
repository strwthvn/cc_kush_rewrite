# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Modbus CLI

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö Holding Registers

**–®–∞–≥–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å: `./modbus_cli.sh`
2. –ù–∞–∂–∞—Ç—å: `1` (–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤)
3. –ù–∞–∂–∞—Ç—å: `2` (Holding Registers)
4. –ù–∞–∂–∞—Ç—å: `0` (–í—ã—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∏—Å–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å –∞–¥—Ä–µ—Å–∞–º–∏ (0.0, 0.1, 0.2, ...)
- –¶–≤–µ—Ç–æ–≤–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∫–∞–∑–∞–Ω–æ –ø–µ—Ä–≤—ã—Ö 50 –∑–∞–ø–∏—Å–µ–π

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ BOOL —Ä–µ–≥–∏—Å—Ç—Ä–∞

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `2` (–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä)
2. –¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞ ‚Üí `1` (Holding Registers)
3. –°–µ–∫—Ü–∏—è ‚Üí `10` (–ö–æ–º–∞–Ω–¥—ã –æ–±—â–∏–µ / General Commands)
4. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ‚Üí `1` (BOOL)
5. –ê–¥—Ä–µ—Å ‚Üí `29`
6. –ë–∏—Ç-–∏–Ω–¥–µ–∫—Å ‚Üí `15`
7. –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Üí `cmdTestButton`
8. –û–ø–∏—Å–∞–Ω–∏–µ ‚Üí `–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –†–µ–≥–∏—Å—Ç—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!
   ID: [–Ω–æ–≤—ã–π ID]
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5` (–ü–æ–∏—Å–∫)
- –í–≤–µ—Å—Ç–∏: `cmdTestButton`
- –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ REAL —Ä–µ–≥–∏—Å—Ç—Ä–∞

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `2` (–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä)
2. –¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞ ‚Üí `2` (Input Registers)
3. –°–µ–∫—Ü–∏—è ‚Üí `3` (Bunker 1 Monitoring / –ë—É–Ω–∫–µ—Ä 1 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
4. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ‚Üí `2` (REAL)
5. –ê–¥—Ä–µ—Å ‚Üí `88`
6. –ë–∏—Ç-–∏–Ω–¥–µ–∫—Å ‚Üí (Enter –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞)
7. –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Üí `stBunker[1].rTestValue`
8. –û–ø–∏—Å–∞–Ω–∏–µ ‚Üí `–¢–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–Ω–∫–µ—Ä–∞ 1`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –†–µ–≥–∏—Å—Ç—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!
   ID: [–Ω–æ–≤—ã–π ID]
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `1` ‚Üí `3` (Input Registers)
- –ù–∞–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä –ø–æ –∞–¥—Ä–µ—Å—É 88-89 (REAL –∑–∞–Ω–∏–º–∞–µ—Ç 2 —Ä–µ–≥–∏—Å—Ç—Ä–∞)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–æ–∏—Å–∫ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É

**–¢–µ—Å—Ç 4.1: –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –±—É–Ω–∫–µ—Ä–∞**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5` (–ü–æ–∏—Å–∫)
2. –í–≤–µ—Å—Ç–∏: `Bunker`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö "Bunker" –≤ –∏–º–µ–Ω–∏ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–∏
- –ü—Ä–∏–º–µ—Ä: `stBunker[1].rWeight`, `stBunker[2].rProportionActual`, –∏ —Ç.–¥.

**–¢–µ—Å—Ç 4.2: –ü–æ–∏—Å–∫ –∫–æ–º–∞–Ω–¥**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5`
2. –í–≤–µ—Å—Ç–∏: `cmd`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –∫–æ–º–∞–Ω–¥: `cmdStart`, `cmdStop`, `cmdReset`, –∏ —Ç.–¥.

**–¢–µ—Å—Ç 4.3: –ü–æ–∏—Å–∫ —á–∞—Å—Ç–æ—Ç VFD**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5`
2. –í–≤–µ—Å—Ç–∏: `Frequency`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã —á–∞—Å—Ç–æ—Ç: `qrOutFrequency`, `rActualFrequency`, –∏ —Ç.–¥.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5` (–ü–æ–∏—Å–∫)
2. –í–≤–µ—Å—Ç–∏: `cmdTestButton` (–∏–∑ –°—Ü–µ–Ω–∞—Ä–∏—è 2)
3. –ó–∞–ø–æ–º–Ω–∏—Ç—å ID —Ä–µ–≥–∏—Å—Ç—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 621)
4. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `3` (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
5. –í–≤–µ—Å—Ç–∏ ID: `621`
6. –í—ã–±—Ä–∞—Ç—å: `2` (–û–ø–∏—Å–∞–Ω–∏–µ)
7. –ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ (–∏–∑–º–µ–Ω–µ–Ω–æ)`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü–æ–∏—Å–∫ ‚Üí `cmdTestButton`
- –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–æ

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `5` (–ü–æ–∏—Å–∫)
2. –í–≤–µ—Å—Ç–∏: `cmdTestButton`
3. –ó–∞–ø–æ–º–Ω–∏—Ç—å ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, 621)
4. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `4` (–£–¥–∞–ª–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä)
5. –í–≤–µ—Å—Ç–∏ ID: `621`
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: `YES`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –†–µ–≥–∏—Å—Ç—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü–æ–∏—Å–∫ ‚Üí `cmdTestButton`
- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `üì≠ –†–µ–≥–∏—Å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 7: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `6` (–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  –í—Å–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤:  620 (–∏–ª–∏ –±–æ–ª—å—à–µ, –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–ª–∏)
  –í—Å–µ–≥–æ —Å–µ–∫—Ü–∏–π:     ~30

–ü–æ —Ç–∏–ø–∞–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤:
  Holding Registers (SCADA ‚Üí PLC)    179
  Input Registers (PLC ‚Üí SCADA)      441

–ü–æ —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö:
  BOOL           464
  REAL           156

–¢–æ–ø-10 —Å–µ–∫—Ü–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤:
  1. Bunker 1 Monitoring             60
  2. Bunker 2 Monitoring             60
  3. Bunker 3 Monitoring             60
  ...
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 8: –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `7` (–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
====================================================================
Modbus Register Excel Exporter
====================================================================

üì§ –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: modbus_registers.db

üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª: modbus_map.xlsx

‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!
   –§–∞–π–ª: /path/to/script/modbus_map.xlsx
====================================================================
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ls -lh script/modbus_map.xlsx
# –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º ~50-100 KB
```

**–û—Ç–∫—Ä—ã—Ç—å –≤ LibreOffice/Excel:**
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–∏—Å—Ç—ã:
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - Holding Registers
  - Input Registers
  - –†–µ–∑–µ—Ä–≤—ã
- –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä –≤–∫–ª—é—á—ë–Ω

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 9: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏—è–º–∏

**–¢–µ—Å—Ç 9.1: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `8` (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏—è–º–∏)
2. –í—ã–±—Ä–∞—Ç—å: `1` (–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
ID    –ù–∞–∑–≤–∞–Ω–∏–µ                                  –î–∏–∞–ø–∞–∑–æ–Ω        –†–µ–≥–∏—Å—Ç—Ä–æ–≤    –¢–∏–ø
--------------------------------------------------------------------------------------------
1     General System Variables                  0-29            15           Holding Registers
2     VFD Parameters                            30-59           0            Holding Registers
3     Bunker Setpoints                          60-89           30           Holding Registers
...
```

**–¢–µ—Å—Ç 9.2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ–∫—Ü–∏–∏**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `8` ‚Üí `2` (–î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é)
2. –¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞ ‚Üí `1` (Holding Registers)
3. –ù–∞–∑–≤–∞–Ω–∏–µ ‚Üí `Test Section`
4. –ù–∞—á–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å ‚Üí `1000`
5. –ö–æ–Ω–µ—á–Ω—ã–π –∞–¥—Ä–µ—Å ‚Üí `1029`
6. –û–ø–∏—Å–∞–Ω–∏–µ ‚Üí `–¢–µ—Å—Ç–æ–≤–∞—è —Å–µ–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°–µ–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ (ID: [–Ω–æ–≤—ã–π ID])
```

**–¢–µ—Å—Ç 9.3: –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç–æ–π —Å–µ–∫—Ü–∏–∏**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `8` ‚Üí `1` (–ü—Ä–æ—Å–º–æ—Ç—Ä)
2. –ù–∞–π—Ç–∏ ID —Å–µ–∫—Ü–∏–∏ "Test Section" (–Ω–∞–ø—Ä–∏–º–µ—Ä, 31)
3. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `8` ‚Üí `4` (–£–¥–∞–ª–∏—Ç—å)
4. –í–≤–µ—Å—Ç–∏ ID: `31`
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: `YES`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°–µ–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞
```

**–¢–µ—Å—Ç 9.4: –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ü–∏—é —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `8` ‚Üí `4`
2. –í–≤–µ—Å—Ç–∏ ID —Å–µ–∫—Ü–∏–∏ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 - Bunker 1)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: `YES`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ü–∏—é: –≤ –Ω–µ–π 60 —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
   –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –∏–∑ —Å–µ–∫—Ü–∏–∏
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 10: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ü–∏–∏

**–®–∞–≥–∏:**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `1` (–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤)
2. –í—ã–±—Ä–∞—Ç—å: `4` (–ü–æ —Å–µ–∫—Ü–∏–∏)
3. –í—ã–±—Ä–∞—Ç—å —Å–µ–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä: `3` (Bunker 1 Monitoring)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä—ã –∏–∑ —Å–µ–∫—Ü–∏–∏ Bunker 1
- –ê–¥—Ä–µ—Å–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 30-89
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø–∞ `stBunker[1].*`

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 11: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö

**–¢–µ—Å—Ç 11.1: –¢–æ–ª—å–∫–æ BOOL —Ä–µ–≥–∏—Å—Ç—Ä—ã**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `1` ‚Üí `5` (–ü–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö)
2. –í—ã–±—Ä–∞—Ç—å: `1` (BOOL)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã —Ç–∏–ø–∞ BOOL
- –ê–¥—Ä–µ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `0.0`, `0.1`, `1.5`, –∏ —Ç.–¥.

**–¢–µ—Å—Ç 11.2: –¢–æ–ª—å–∫–æ REAL —Ä–µ–≥–∏—Å—Ç—Ä—ã**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `1` ‚Üí `5`
2. –í—ã–±—Ä–∞—Ç—å: `2` (REAL)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã —Ç–∏–ø–∞ REAL
- –ê–¥—Ä–µ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `30-31`, `32-33`, –∏ —Ç.–¥. (–¥–∏–∞–ø–∞–∑–æ–Ω—ã)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 12: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–¢–µ—Å—Ç 12.1: –î—É–±–ª–∏–∫–∞—Ç –∞–¥—Ä–µ—Å–∞**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `2` (–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä)
2. –¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞ ‚Üí `1` (Holding)
3. –°–µ–∫—Ü–∏—è ‚Üí `10`
4. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ‚Üí `1` (BOOL)
5. –ê–¥—Ä–µ—Å ‚Üí `0`
6. –ë–∏—Ç-–∏–Ω–¥–µ–∫—Å ‚Üí `0` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!)
7. –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Üí `duplicate`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå –û—à–∏–±–∫–∞: —Ä–µ–≥–∏—Å—Ç—Ä —Å —Ç–∞–∫–∏–º –∞–¥—Ä–µ—Å–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   UNIQUE constraint failed: registers.register_address
```

**–¢–µ—Å—Ç 12.2: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `3` (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
2. –í–≤–µ—Å—Ç–∏ ID: `999999` (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå –†–µ–≥–∏—Å—Ç—Ä —Å ID 999999 –Ω–µ –Ω–∞–π–¥–µ–Ω
```

**–¢–µ—Å—Ç 12.3: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `4` (–£–¥–∞–ª–∏—Ç—å)
2. –í–≤–µ—Å—Ç–∏ ID: `999999`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ùå –†–µ–≥–∏—Å—Ç—Ä —Å ID 999999 –Ω–µ –Ω–∞–π–¥–µ–Ω
```

**–¢–µ—Å—Ç 12.4: –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤–≤–æ–¥–∞ (Ctrl+C)**
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí `2` (–î–æ–±–∞–≤–∏—Ç—å)
2. –ù–∞—á–∞—Ç—å –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
3. –ù–∞–∂–∞—Ç—å: `Ctrl+C`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–û—Ç–º–µ–Ω–∞
[–≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é]
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
#!/bin/bash
# test_modbus_cli.sh

echo "=== –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç Modbus CLI ==="

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ë–î
if [ -f "db/modbus_registers.db" ]; then
    echo "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω–∞"
else
    echo "‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    exit 1
fi

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
COUNT=$(sqlite3 db/modbus_registers.db "SELECT COUNT(*) FROM registers;")
echo "‚úÖ –í—Å–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤: $COUNT"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ü–∏–π
SECTIONS=$(sqlite3 db/modbus_registers.db "SELECT COUNT(*) FROM sections;")
echo "‚úÖ –í—Å–µ–≥–æ —Å–µ–∫—Ü–∏–π: $SECTIONS"

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
python3 export_to_excel.py > /dev/null 2>&1
if [ -f "modbus_map.xlsx" ]; then
    echo "‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel —Ä–∞–±–æ—Ç–∞–µ—Ç"
    SIZE=$(ls -lh modbus_map.xlsx | awk '{print $5}')
    echo "   –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: $SIZE"
else
    echo "‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel"
fi

echo "=== –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω ==="
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x test_modbus_cli.sh
./test_modbus_cli.sh
```

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä Holding Registers
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä Input Registers
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ü–∏–∏
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ BOOL —Ä–µ–≥–∏—Å—Ç—Ä–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ REAL —Ä–µ–≥–∏—Å—Ç—Ä–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ INT —Ä–µ–≥–∏—Å—Ç—Ä–∞
- [ ] –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- [ ] –ü–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ–∫—Ü–∏–π
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç–æ–π —Å–µ–∫—Ü–∏–∏
- [ ] –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–∫—Ü–∏–∏ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç –∞–¥—Ä–µ—Å–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ ID
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã—Ö–æ–¥ —á–µ—Ä–µ–∑ –º–µ–Ω—é (0)

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä 50 —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤: < 0.5 —Å–µ–∫
- –ü–æ–∏—Å–∫ (100 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤): < 0.3 —Å–µ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞: < 0.1 —Å–µ–∫
- –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞: < 0.1 —Å–µ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î: < 0.2 —Å–µ–∫
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel (620 —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤): < 2 —Å–µ–∫

**–†–∞–∑–º–µ—Ä –ë–î:**
- –ò—Å—Ö–æ–¥–Ω–∞—è –ë–î (620 —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤): ~216 KB
- Excel —Ñ–∞–π–ª: ~50-100 KB

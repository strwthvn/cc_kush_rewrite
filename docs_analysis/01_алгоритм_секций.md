# Алгоритм секций КУШ

## Общее описание системы

**КУШ (Комплекс Угольного Шихтования)** - система для смешивания углей разной крупности в процентных долях согласно заданию оператора.

**Особенность**: режим ограниченной производительности по электрической мощности (КИУМ).

---

## Секция 1: Модульный бункер-накопитель (3 шт.)

### Состав оборудования
- Вибраторы: 4 шт.
- Вибропитатель: 2 электродвигателя
- Пневмопушки: 8 шт. (как комплекс)
- Датчик наружной температуры: 1 шт.
- РТС-термисторы: 2 шт. (на вибропитателях)
- Датчик ограждения: 1 шт.
- Светофор: 1 шт.
- Весы бункерные: 1 шт.

### Атрибуты
| Параметр | Тип | Описание |
|----------|-----|----------|
| Потребляемая мощность (КИУМ) | INT | Текущее потребление |
| Установленная мощность | INT | Номинальная мощность |
| Вес материала | INT | Измерение весов |
| Производительность | INT | Текущая производительность |
| Контур безопасности | BOOL | Состояние защиты |
| Температура статора | BOOL | Дискретный PTC |
| Состояние светофора | BOOL | Сигнал светофора |

### Алгоритм: Пневмообрушение
**Назначение**: предотвращение заштыбовки материала

**Режимы активации**:
1. По таймеру (настраиваемая уставка)
2. Принудительно (триггер оператора)
3. Автоматически по температуре окружающей среды

**Ограничения**: компрессор подвержен КИУМ

### Алгоритм: Виброобрушение
**Назначение**: предотвращение заштыбовки, улучшение проходимости материала

**Режимы активации**:
1. По таймеру (настраиваемая уставка)
2. Принудительно (триггер оператора)
3. Автоматически по температуре окружающей среды

**Блокировки**:
- Авария ПЧ
- Перегрев подшипников (с указанием конкретного двигателя)
- Блокировка снимается при снижении температуры до уставки

### Алгоритм: Разрешение на погрузку
**Назначение**: управление светофором для контроля загрузки

**Логика светофора**:
- **Зеленый**: погрузка разрешена
- **Красный**: погрузка запрещена

**Условия красного сигнала**:
1. Достигнут максимальный вес бункера
2. Активно аварийное состояние СУ КУШ (отключаемая опция)

**Защита от ошибок оператора**:
- При превышении уставки переключение на зеленый игнорируется
- Выводится сообщение: "Недопустимое действие. Достигнута максимальная загрузка бункера"
- Разблокировка только при снижении веса

### Алгоритм: Подача материала (вибропитатели)
**Назначение**: перемещение материала на сборный конвейер

**Режимы**:
- Ручной (сервисный): независимый запуск
- Автоматический: зависит от задания шихтования

**Работа в автоматическом режиме**:
1. Производительность рассчитывается системой на основе пропорции шихты
2. Запуск последовательный с ожиданием ОС от ПЧ
3. Подвержен проверке КИУМ

---

## Секция 2: Сборный ленточный конвейер (1 шт.)

### Состав оборудования
- Электропривод: 2 электродвигателя
- Металлодетектор: 1 шт.
- Весы конвейерные: 1 шт.
- Звуковая сигнализация: 1 шт.
- Световая сигнализация: 1 шт.
- Датчики безопасности: комплект
- Датчик скорости ленты: 1 шт.
- Датчик заштыбовки: 1 шт.
- Датчик продольного разрыва: 1 шт.
- Реле температуры: 2 шт.

### Атрибуты
| Параметр | Тип | Описание |
|----------|-----|----------|
| Потребляемая мощность (КИУМ) | INT | Текущее потребление |
| Установленная мощность | INT | Номинальная мощность |
| Вес материала | INT | Измерение конв. весов |
| Скорость конвейера | INT | Фактическая скорость |
| Задание скорости | INT | Уставка скорости |
| Контур безопасности | BOOL | Состояние защиты |
| Световая сигнализация | BOOL | Состояние света |
| Звуковая сигнализация | BOOL | Состояние звука |
| Металлодетектор | BOOL | Состояние детектора |
| Температура статора | BOOL | Перегрев привода |

### Алгоритм: Транспортировка материала
**Назначение**: транспортировка компонентов шихты через металлодетектор на отвалообразователь

**Особенности**:
- Без регулирования скорости
- Контроль выхода на заданную скорость

**Последовательность запуска**:
1. Проверка условий запуска
2. Подача сигнализации (звук/свет)
3. Запуск приводов
4. Контроль выхода на режим

---

## Секция 3: Отвалообразователь на ленточном ходу (1 шт.)

### Состав оборудования
- Электропривод ленты: 2 электродвигателя
- Электропривод поворота: 2 электродвигателя
- Звуковая сигнализация: 1 шт.
- Световая сигнализация: 1 шт.
- Датчики безопасности: комплект
- Датчик скорости ленты: 1 шт.
- Датчик заштыбовки: 1 шт.
- Датчик продольного разрыва: 1 шт.
- Реле температуры: 4 шт.

### Атрибуты
| Параметр | Тип | Описание |
|----------|-----|----------|
| Потребляемая мощность (КИУМ) | INT | Текущее потребление |
| Установленная мощность | INT | Номинальная мощность |
| Скорость конвейера | INT | Фактическая скорость |
| Задание скорости | INT | Уставка скорости |
| Контур безопасности | BOOL | Состояние защиты |
| Световая сигнализация | BOOL | Состояние света |
| Звуковая сигнализация | BOOL | Состояние звука |
| Температура статора | BOOL | Перегрев приводов |

### Алгоритм: Транспортировка материала
**Назначение**: транспортировка от сборного конвейера до места складирования

**Особенности**:
- Без регулирования скорости
- Контроль выхода на заданную скорость

### Алгоритм: Поворот отвалообразователя
**Назначение**: поворот на угол 160 градусов для выбора места складирования

**Позиционирование**:
- Ограничение концевыми выключателями
- Без точного позиционирования по ОС
- Расчет по времени и статистике
- Калибровка нулевой точки вручную оператором

**Перспектива развития**: машинное зрение (нейросеть по камере)

---

## Общий алгоритм шихтования

### Последовательность операций

1. **Задание пропорции**
   - Оператор задает процентное соотношение
   - Сумма должна равняться 100%
   - Иначе автоматический режим недоступен

2. **Позиционирование отвалообразователя**
   - Оператор устанавливает место складирования

3. **Проверка ошибок**
   - Система проверяет активные ошибки
   - Без квитирования запуск невозможен

4. **Запуск автоматического режима**
   - Система рассчитывает производительность вибропитателей

5. **Последовательный запуск конвейеров**
   - Сначала отвалообразователь
   - После выхода на режим - сборный конвейер

6. **Последовательный запуск вибропитателей**
   - С ожиданием ОС от ПЧ
   - Предотвращение превышения пусковых токов

7. **Работа дополнительных нагрузок**
   - Вибраторы, компрессор, поворот
   - Каждое включение через проверку КИУМ

8. **Завершение и отчетность**
   - Уведомление о выполнении
   - Формирование отчета

---

## КИУМ (Коэффициент использования установленной мощности)

### Назначение
Контроль бюджета доступной мощности для предотвращения перегрузки системы электроснабжения.

### Принцип работы
- Проверка перед каждой операцией увеличения потребления
- Шкала на SCADA
- Учет в алгоритмах ПЛК

### Источники данных
- Косвенно через ПЧ (ток с пересчетом в мощность)
- Счетчик электроэнергии на шинах РУНН

### Отчетность
1. Тренд суммарной расчетной мощности
2. Тренд мощности от счетчика
